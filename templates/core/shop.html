{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% block title %}
Sociala/Shop
{% endblock title %}
{% block body %}

    <div class="container bg-white" style='margin-top:60px'>
        <div class="row">
            <div class="col-xl-12">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="card p-md-5 p-4 bg-primary-gradiant rounded-3 shadow-xss bg-pattern border-0 overflow-hidden">
                            <div class="bg-pattern-div"></div>
                            <h2 class="display2-size display2-md-size fw-700 text-white mb-0 mt-0">{% trans 'Shop' %} <span class="fw-700 ls-3 text-grey-200 font-xsssss mt-2 d-block">{{ products|length }} {% trans 'PRODUCT FOUND' %}</span></h2>
                        </div>
                    </div>

                    <div class="col-lg-12 mt-4">
                        <div class="card w-100 p-4 border-0 bg-lightblue">
                            <div class="row">
                                <div class="col-lg-3">
                                    <div class="form-group mb-0">
                                        <label for="Search" class="fw-600 text-grey-900 font-xsss">{% trans 'Categories' %}</label>
                                    </div>
                                    <ul class="recent-post mt-2">
                                        {% for cat in categories %}
                                            <li class="mb-0"><a href="{% url 'cat_slug' cat.slug %}" class="fw-600 font-xssss">
                                            {{ cat.name }}</a></li>
                                        {% endfor %}
                                    </ul>
                                </div>
                                <div class="col-lg-3 pe-4">
                                    <div class="form-group mb-0">
                                        <label for="Search" class="fw-600 text-grey-900 font-xsss">{% trans 'Brand' %}</label>
                                    </div>
                                    {% for brand in brands %}
                                        <div class="form-group mb-2 mt-2">
                                            <a href='{{ brand.get_absolute_url }}' class="small-size fw-600 text-grey-800 font-xssss d-block">{{ brand.name }}<span class="float-right fw-600 text-grey-600 font-xssss mt-1">{{ brand.product_set.all.count }}</span></a>
                                        </div>
                                    {% endfor %}
                                </div>
                                <div class="col-lg-3">
                                    <div class="form-group mb-0">
                                        <label for="Search" class="fw-600 text-grey-900 font-xsss">{% trans 'Sizes' %}</label>
                                    </div>
                                    <ul class="list-inline mt-2">
                                        {% for size in size_variations %}
                                            <li class="list-inline-item me-0 mb-2"><a href="{% url 'size_slug' size %}" class="btn-round-sm bg-white fw-600 font-xssss text-grey-800 ">{{ size }}</a></li>
                                        {% endfor %}
                                    </ul> 

                                    <div class="form-group mb-0 mt-4">
                                        <label for="Search" class="fw-600 text-grey-900 font-xsss">{% trans 'Colors' %}</label>
                                    </div>
                                    <ul class="list-inline mt-2">
                                        {% for color in variations %}
                                            <li class="list-inline-item me-0"><a href="{% url 'color_slug' color %}" class="btn-round-sm" style="background-color: {{color}}"></a></li>
                                        {% endfor %}
                                    </ul>

                                </div>
                                <div class="col-lg-3">
                                    <div class="form-group mb-0 mt-0">
                                        <label for="Search" class="fw-600 text-grey-900 font-xsss">{% trans 'Price' %}</label>
                                    </div>
                                    <div class="form-group mt-3 mb-0">
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <form method='GET'>
                                                    <input type="number" class='form-control' name="from" required step='0.1' min='1' placeholder='From 0'>
                                                    <input type="number" class='form-control mt-2' name="to" required step='0.1' min='1'placeholder='To 0.000'>
                                                    <button type="submit" class="form-control text-center mt-2 style2-input text-white fw-600 bg-primary p-0">Filter</button>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>  
                            </div>  
                        </div>
                    </div>

                    
                    {% for i in products %}
                        <div class="col-lg-4 col-md-6">
                            <div class="card w-100 border-0 mt-4">
                                <div class="card-image w-100 p-0 text-center bg-greylight rounded-3 mb-2">
                                    <a href="{{ i.get_absolute_url }}"><img src="{{ i.img.url }}" alt="product-image" class="w-100 mt-0 mb-0 p-5"></a>
                                </div>
                                <div class="card-body w-100 p-0 text-center">
                                    <h2 class="mt-2 mb-1"><a href="{{ i.get_absolute_url }}" class="text-black fw-700 font-xsss lh-26">{{ i.name }}</a></h2>
                                    {% if i.discount_percentage %}
                                    <h6 class="font-xsss fw-600 text-grey-500 ls-2">${{i.discount_price}}</h6>
                                    <h6 class="font-xsss fw-600 text-danger ls-2">% {{i.discount_percentage}}</h6>
                                    {% else %}
                                    <h6 class="font-xsss fw-600 text-grey-500 ls-2">${{i.price}}</h6>
                                    {% endif %}
                                </div>                                
                            </div>
                        </div>
                    {% endfor %}

                    {% if products.has_other_pages %}
                        <div class="col-12 mb-5">
                            <nav>
                            <ul class="pagination justify-content-center">
                            {% if products.has_previous %}
                            <li><a href="?p={{products.previous_page_number}}"><span class="ti-angle-left"></span></span></a></li>
                            {% endif %} 

                            {% for i in products.paginator.page_range %}
                            <li style='text-decoration: {% if i >= products.number %} none {% else %} line-through {% endif %}' class="page-item me-3 ms-3"><a href="?p={{i}}">{{i}}</a></li>
                            {% endfor %}
                            
                            {% if products.has_next %}
                            <li><a href="?p={{products.next_page_number}}"><span class="ti-angle-right"></span></a></li>
                            {% endif %}
                            </ul>
                            </nav>
                        </div>
                    {% endif %}
                </div>
            </div>               
        </div>
    </div>
    
{% endblock body %}

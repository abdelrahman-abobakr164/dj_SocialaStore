{% extends "base.html" %}
{% load static %}
{% load i18n %}
{% block title %}
Sociala/Orders
{% endblock title %}
{% block body %}

    <div class="container bg-white" style='margin-top:60px'>
        <div class="row">
            <div class="col-xl-12">
                <div class="row mb-4">
                    <div class="col-lg-12">
                        <div class="card p-md-5 p-4 bg-primary-gradiant rounded-3 shadow-xss bg-pattern border-0 overflow-hidden">
                            <div class="bg-pattern-div"></div>
                            <h2 class="display2-size display2-md-size fw-700 text-white mb-0 mt-5">{% trans 'Orders' %} <span class="fw-700 ls-3 text-grey-200 font-xsssss mt-2 d-block">{{ orders.count }} {% trans 'ORDER FOUND' %}</span></h2>
                        </div>
                    </div>

                </div>
                <div class="row">
                    <div class="col-lg-12 mb-3">
                        <div class="table-content table-responsive">
                            <table class="table text-center">


                                <thead class="bg-greyblue rounded-3">
                                    <tr>
                                        <th class="border-0 p-4">{% trans 'Order Number' %}</th>
                                        <th class="border-0 p-4">{% trans 'Address' %}</th>
                                        <th class="border-0 p-4">{% trans 'Status' %}</th>
                                        <th class="border-0 p-4">{% trans 'Total' %}</th>
                                        <th class="border-0 p-4">{% trans 'Created at' %}</th>
                                        <th class="border-0 p-4">&nbsp;</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for i in orders %}
                                    <tr>
                                        <td class="product-headline text-left wide-column">
                                            <h3><p class="text-grey-900 fw-600 font-xsss">{{ i.order_number }}</p></h3>
                                        </td>
                                        <td class="product-headline text-left wide-column">
                                            <h3><p class="text-grey-900 fw-600 font-xsss">{{ i.shipping_address.full_address }}</p></h3>
                                        </td>
                                        <td class="product-p">
                                            
                                            {% if i.refunds.all %}
                                                {% for r in i.refunds.all %}
                                                    {% if r.status == 'DECLINED' or r.status == 'APPROVED' %}
                                                        <p>{{ r.status }} REFUND</p>
                                                        {% else %}
                                                        <p>Refund Requested</p>
                                                    {% endif %}
                                                {% endfor %}
                                            {% else %}
                                                <p>{{ i.status }}</p>
                                            {% endif %}

                                        </td>
                                        <td class="product-p">
                                            <p>${{ i.total }}</p>
                                        </td>
                                        <td class="product-p">
                                            <p>{{ i.created_at }}</p>
                                        </td>
                                        <td class="product-p">
                                            <a class='btn btn-primary' href='{% url "order-detail" i.order_number %}'>
                                            {% if i.status == 'Uncomplete' %}
                                                {% trans 'Uncomplete' %}
                                            {% endif %}
                                            <i class="ti-arrow-right"></i></a>
                                        </td>
                                        {%empty%}
                                        <td colspan='5'>{% trans "You Don't Have Orders Yet" %}</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>               
        </div>
    </div>

{% endblock %}